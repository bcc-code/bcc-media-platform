fragment EpisodeItem on EpisodeItem {
    episode {
        number
        season {
            show {
                title
            }
            number
        }
    }
}

fragment SeasonItem on SeasonItem {
    season {
        number
        show {
            title
        }
    }
}

fragment ShowItem on ShowItem {
    show {
        title
    }
}

fragment PageItem on PageItem {
    page {
        code
    }
}

fragment Section on ItemSection {
    style
    items {
        items {
            __typename
            id
            title
            imageUrl
            sort
            ... EpisodeItem
            ... SeasonItem
            ... ShowItem
            ... PageItem
        }
    }
}

query getPage($code: String!) {
    page(code: $code) {
        id
        title
        sections {
            items {
                id
                title
                ... Section
            }
        }
    }
}
